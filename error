{
  "detail": "(sqlite3.ProgrammingError) Error binding parameter 7: type 'HttpUrl' is not supported\n[SQL: INSERT INTO products (name, description, price, in_stock, category, available, image_url, discount) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]\n[parameters: ('mouse', 'wireless mouse', 29.99, 10, 'electronic', 1, HttpUrl('https://example.com/image.png'), 0.05)]\n(Background on this error at: https://sqlalche.me/e/20/f405)"
}
def create_product(db: Session, data: schemas.ProductCreate):
    try:
        product_data = data.dict()
        if product_data.get("image_url"):
            product_data["image_url"] = str(product_data["image_url"])  # Convert HttpUrl to string

        product = models.Product(**product_data)
        db.add(product)
        db.commit()
        db.refresh(product)
        return product
    except Exception as e:
        db.rollback()
        raise HTTPException(status_code=500, detail=str(e))
